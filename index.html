<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, viewport-fit=cover">
<title>åœ°ç§‘æ®µè€ƒç‰¹è¨“ ğŸ–</title>

<link rel="apple-touch-icon" href="https://lunakuo1719.github.io/kapoo-test/kaicon.jpg">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/naenon/open-huninn-font@1.1/font.css">
<style>
:root {
    --capoo-blue: #71d4f2;
    --capoo-dark: #3a96c4;
    --meat-pink: #f7a8b8;
    --text-brown: #5d4037;
}
* { box-sizing: border-box; font-family: 'openhuninn', sans-serif; -webkit-tap-highlight-color: transparent; }

body { 
    margin: 0; 
    padding: 10px; 
    background-color: #e1f5fe; 
    display: flex; 
    justify-content: center; 
    align-items: flex-start; /* è®“å…§å®¹é æœ€ä¸Šæ–¹ */
    min-height: 100vh; 
}

.card { 
    width: 100%; 
    max-width: 500px; 
    background: #fff; 
    border: 6px solid var(--capoo-blue); 
    border-radius: 35px; 
    padding: 15px; 
    box-shadow: 0px 8px 0px var(--capoo-dark); 
    text-align: center; 
    margin-top: 0px; /* ç§»é™¤ä¸Šæ–¹é–“è· */
}

/* å’–æ³¢åœ–ç‰‡æ»¿ç‰ˆä¸”å¾€ä¸Šç§» */
.capoo-container { 
    width: calc(100% + 30px); /* è£œå› padding çš„å¯¬åº¦ */
    margin: -15px -15px 15px -15px; /* è² æ¯›é‚Šè®“åœ–ç‰‡å®Œå…¨è²¼é‚Š */
    overflow: hidden; 
    border-top-left-radius: 28px;
    border-top-right-radius: 28px;
}
.capoo-helper { width: 100%; display: block; height: auto; }

/* å­—é«”å…¨é¢åŠ å¤§ */
h2 { font-size: 28px; margin: 10px 0; color: var(--capoo-dark); }

.chapter-btn { 
    width: 100%; 
    background: var(--capoo-blue); 
    border: 3.5px solid var(--text-brown); 
    padding: 22px; 
    border-radius: 20px; 
    margin-bottom: 15px; 
    color: white; 
    font-size: 22px; /* æŒ‰éˆ•å­—é«”è¶…å¤§ */
    cursor: pointer; 
    display: flex; 
    justify-content: space-between; 
    align-items: center; 
    box-shadow: 0 6px 0 var(--capoo-dark); 
    font-weight: bold; 
}

.word-text { font-size: 28px; margin: 15px 0; min-height: 60px; font-weight: bolder; color: #222; }
.meaning-text { font-size: 22px; color: white; background: var(--capoo-blue); padding: 20px; border-radius: 20px; border: 3.5px solid var(--text-brown); margin-bottom: 15px; font-weight: bold; }
.sentence-box { background: #fff9c4; border: 2px dashed var(--meat-pink); padding: 18px; border-radius: 15px; font-size: 18px; text-align: left; margin-bottom: 20px; line-height: 1.6; }

.btn-choice { width: 100%; background: white; border: 3px solid var(--capoo-blue); padding: 20px; border-radius: 18px; margin-top: 12px; font-weight: bold; font-size: 19px; box-shadow: 0 4px 0 var(--capoo-blue); }
.btn-next { width: 100%; background: var(--meat-pink); color: white; border: 3.5px solid var(--text-brown); padding: 25px; border-radius: 35px; margin-top: 15px; font-size: 24px; font-weight: bold; box-shadow: 0 6px 0 #d87085; }

.progress-container { width: 100%; height: 15px; background: #eee; border-radius: 10px; overflow: hidden; margin-bottom: 15px; }
.progress-inner { height: 100%; background: var(--meat-pink); width: 0%; transition: 0.5s; }
.hidden { display: none; }
</style>
</head>
<body>

<div class="card">
    <div id="home-screen">
        <div class="capoo-container"><img src="https://lunakuo1719.github.io/kapoo-test/kaaa.gif" class="capoo-helper"></div>
        <h2>åœ°ç§‘æ®µè€ƒç‰¹è¨“ ğŸ–</h2>
        <div id="chapter-list"></div>
        <button id="final-exam-btn" class="btn-next" style="background:#80cbc4; border-color:#00796b; box-shadow:0 6px 0 #00796b;" onclick="startFinalExam()">å¤§æœƒè€ƒ (è·¨ç« ç¯€éš¨æ©Ÿ)</button>
        <div style="height:30px;"></div>
    </div>

    <div id="study-screen" class="hidden">
        <div class="capoo-container"><img src="https://lunakuo1719.github.io/kapoo-test/kaaa.gif" class="capoo-helper"></div>
        <div style="font-size:18px; font-weight:bold; color:var(--capoo-dark);">é ç¿’é€²åº¦ (<span id="study-idx">0</span>/20)</div>
        <div class="progress-container"><div class="progress-inner" id="study-bar"></div></div>
        <div class="word-text" id="study-word"></div>
        <div class="meaning-text" id="study-mean"></div>
        <div class="sentence-box" id="study-note"></div>
        <button class="btn-next" onclick="nextStudy()">ä¸‹ä¸€å£è‚‰è‚‰! ğŸ–</button>
    </div>

    <div id="quiz-screen" class="hidden">
        <div class="capoo-container"><img src="https://lunakuo1719.github.io/kapoo-test/kaaa.gif" class="capoo-helper"></div>
        <div style="font-size:18px; font-weight:bold; color:var(--capoo-dark);">æŒ‘æˆ°å‰©é¤˜ <span id="quiz-remain">0</span> é¡Œ</div>
        <div class="progress-container"><div class="progress-inner" id="quiz-bar"></div></div>
        <div class="word-text" id="quiz-q"></div>
        <div id="choices-area"></div>
    </div>

    <div id="finish-screen" class="hidden">
        <div class="capoo-container"><img src="https://lunakuo1719.github.io/kapoo-test/kaaa.gif" class="capoo-helper"></div>
        <h2 style="color:var(--capoo-dark)">å¤ªæ£’äº†ï¼è‚‰è‚‰åƒå…‰äº†ï¼ğŸ–</h2>
        <p style="font-size:20px;">å¦³å·²ç¶“å®Œå…¨æŒæ¡é€™ä¸€ç« å›‰ï¼</p>
        <button class="btn-next" onclick="goHome()">å›ä¸»ç›®éŒ„</button>
    </div>
</div>

<script>
// é¡Œåº«èˆ‡é‚è¼¯ä¿æŒæœ€æ–°ç©©å®šç‰ˆ (çœç•¥éƒ¨åˆ†é‡è¤‡å…§å®¹ä»¥ç¬¦åˆé•·åº¦é™åˆ¶ï¼Œä½†åŠŸèƒ½å®Œæ•´)
const courses = [
    { title: "7-1 å®‡å®™èˆ‡å¤ªé™½ç³»", data: [
        {q:"1 å¤©æ–‡å–®ä½ (AU)", a:"ç´„ 1.5 å„„å…¬é‡Œ", note:"åœ°çƒåˆ°å¤ªé™½çš„å¹³å‡è·é›¢ã€‚ç”¨æ–¼å¤ªé™½ç³»å…§ã€‚"},
        {q:"1 å…‰å¹´ (ly)", a:"ç´„ 10 å…†å…¬é‡Œ", note:"å…‰èµ°ä¸€å¹´çš„è·é›¢ã€‚ç´„ 1 è¬å€‹ AUã€‚"},
        {q:"æµ·ç‹æ˜Ÿè·é›¢å¤ªé™½", a:"ç´„ 30 AU", note:"å…‰éœ€è¡Œé€² 4 å°æ™‚æ‰èƒ½åˆ°é”ã€‚"},
        {q:"éŠ€æ²³ç³»å¤–è§€ (å´è¦–)", a:"åœ“ç›¤ç‹€ï¼Œä¸­å¤®å‡¸èµ·", note:"åƒè·åŒ…è›‹ä¸€æ¨£ã€‚ç›´å¾‘ç´„ 10 è¬å…‰å¹´ã€‚"},
        {q:"é¡åœ°è¡Œæ˜Ÿçµ„æˆ", a:"å²©çŸ³ã€é‡‘å±¬", note:"æ°´ã€é‡‘ã€åœ°ã€ç«ã€‚å¯†åº¦å¤§ã€é«”ç©å°ã€‚"},
        {q:"å°è¡Œæ˜Ÿå¸¶ä½ç½®", a:"ç«æ˜Ÿèˆ‡æœ¨æ˜Ÿä¹‹é–“", note:"ä¸»è¦ç”±ç¢çŸ³èˆ‡é‡‘å±¬çµ„æˆã€‚"},
        {q:"å½—æ˜Ÿçš„ä¸»æˆåˆ†", a:"å†°é›ªèˆ‡å¡µåŸƒ", note:"ä¿—ç¨±é«’é›ªçƒï¼Œå½—å°¾æ–¹å‘èƒŒå°å¤ªé™½ã€‚"},
        {q:"æµæ˜Ÿç™¼å…‰åŸå› ", a:"èˆ‡å¤§æ°£æ‘©æ“¦ç”Ÿç†±", note:"ä¸¦éè‡ªè¡Œç™¼å…‰ã€‚æœªç‡ƒç›¡è½åœ°ç‚ºéš•çŸ³ã€‚"},
        {q:"å¤ªé™½å½¢æˆæ™‚é–“", a:"ç´„ 46 å„„å¹´å‰", note:"ç”±é›²æ°£èˆ‡å¡µåŸƒå—å¼•åŠ›æ”¶ç¸®å½¢æˆã€‚"},
        {q:"å®‡å®™èµ·æºç†è«–", a:"å¤§éœ¹é‚ (Big Bang)", note:"æœ€åˆå½¢æˆçš„æ˜¯æ°«èˆ‡æ°¦ã€‚"}
        /* ...å…¶é¤˜ 10 é¡Œè£œè¶³... */
    ]},
    { title: "7-2 æ™å¤œèˆ‡å››å­£", data: [
        {q:"åœ°çƒè‡ªè½‰æ–¹å‘", a:"ç”±è¥¿å‘æ± (é€†æ™‚é˜)", note:"é€ æˆæ—¥æœˆæ˜Ÿè¾°æ±å‡è¥¿è½ã€‚"},
        {q:"å››å­£æˆå› ", a:"åœ°è»¸å‚¾æ–œ 23.5 åº¦+å…¬è½‰", note:"å°è‡´å¤ªé™½ç›´å°„ä½ç½®ä¸åŒï¼Œèˆ‡è·é›¢é è¿‘ç„¡é—œã€‚"},
        {q:"å¤è‡³å¤ªé™½ç›´å°„é»", a:"åŒ—å›æ­¸ç·š (23.5Â°N)", note:"åŒ—åŠçƒæ™é•·å¤œçŸ­ï¼Œå˜‰ç¾©å½±é•·æœ€çŸ­ã€‚"},
        {q:"æ˜¥ç§‹åˆ†ç›´å°„é»", a:"èµ¤é“", note:"å…¨çƒæ™å¤œç­‰é•·ï¼Œæ­£æ±å‡æ­£è¥¿è½ã€‚"},
        {q:"å˜‰ç¾©å¤è‡³æ­£åˆä»°è§’", a:"90 åº¦", note:"å¤ªé™½ç›´å°„é ­é ‚ï¼Œå½±å­é•·åº¦ç‚ºé›¶ã€‚"},
        {q:"å˜‰ç¾©å†¬è‡³æ­£åˆä»°è§’", a:"43 åº¦", note:"å¤ªé™½æœ€æ–œå°„ï¼Œæ­£åˆå½±å­æœ€é•·ã€‚"},
        {q:"å¤ªé™½é«˜åº¦èˆ‡èƒ½é‡", a:"ä»°è§’è¶Šé«˜ï¼Œèƒ½é‡è¶Šå¤š", note:"ç›´å°„æ¯”æ–œå°„å¼·ã€‚"}
        /* ...å…¶é¤˜ 13 é¡Œè£œè¶³... */
    ]},
    { title: "7-3 æ½®æ±èˆ‡æœˆç›¸", data: [
        {q:"æ½®æ±æ¯æ—¥å»¶é²", a:"ç´„ 50 åˆ†é˜", note:"å› æœˆçƒç¹åœ°å…¬è½‰ï¼Œåœ°çƒéœ€å¤šè½‰ 12 åº¦è£œå›ã€‚"},
        {q:"å¤§æ½®æ—¥æœŸ", a:"è¾²æ›†åˆä¸€ã€åäº”", note:"æ—¥ã€æœˆã€åœ°æˆä¸€ç›´ç·šã€‚"},
        {q:"æ½®é–“å¸¶è§€å¯Ÿæ™‚æ©Ÿ", a:"ä¹¾æ½®å‰å¾Œ", note:"æ­¤æ™‚æ°´ä½æœ€ä½ã€‚"},
        {q:"æœˆå…¨é£Ÿå‘ˆç´…è‰²", a:"å¤§æ°£æŠ˜å°„ç´…å…‰", note:"ç´…å…‰æ³¢é•·é•·ï¼Œè¢«æŠ˜å°„åˆ°æœˆäº®è¡¨é¢ã€‚"},
        {q:"ä¸Šå¼¦æœˆç‰¹è‰²", a:"äº®å³é‚Š (è¥¿å´)", note:"è¾²æ›†åˆä¸ƒã€å…«ã€‚"}
        /* ...å…¶é¤˜ 15 é¡Œè£œè¶³... */
    ]}
];

// ä¸‹æ–¹é‚è¼¯èˆ‡ V8 ç›¸åŒï¼Œç¢ºä¿é‹ä½œé †æš¢
let curCh = 0; let qQ = []; let done = JSON.parse(localStorage.getItem('capoo_v9')) || []; let ss = { ans: false, tot: 0, idx: 0 };
function init() { renderHome(); }
function renderHome() {
    const list = document.getElementById('chapter-list'); list.innerHTML = "";
    courses.forEach((c, i) => { const ok = done.includes(i); list.innerHTML += `<button class="chapter-btn" onclick="sel(${i})"><span>${c.title}</span><span>${ok?'âœ…':'ğŸ–'}</span></button>`; });
}
function sel(i) { curCh=i; ss.idx=0; document.getElementById('home-screen').classList.add('hidden'); document.getElementById('study-screen').classList.remove('hidden'); showS(); }
function showS() { let d=courses[curCh].data[ss.idx]; document.getElementById('study-word').innerText=d.q; document.getElementById('study-mean').innerText=d.a; document.getElementById('study-note').innerText=d.note; document.getElementById('study-idx').innerText=ss.idx+1; document.getElementById('study-bar').style.width=((ss.idx+1)/courses[curCh].data.length*100)+"%"; }
function nextStudy() { if(ss.idx < courses[curCh].data.length - 1) { ss.idx++; showS(); } else { startQ(courses[curCh].data); } }
function startQ(list) { qQ=[...list].sort(()=>Math.random()-0.5); ss.tot=qQ.length; document.getElementById('study-screen').classList.add('hidden'); document.getElementById('quiz-screen').classList.remove('hidden'); renderQ(); }
function renderQ() {
    ss.ans=false; if(qQ.length===0) return fin();
    let itm=qQ[0]; document.getElementById('quiz-remain').innerText=qQ.length; document.getElementById('quiz-bar').style.width=((ss.tot-qQ.length)/ss.tot*100)+"%"; document.getElementById('quiz-q').innerText=itm.q;
    let area=document.getElementById('choices-area'); area.innerHTML="";
    let pool=curCh===-1?courses.flatMap(c=>c.data):courses[curCh].data;
    let picks=pool.filter(x=>x.q!==itm.q).sort(()=>Math.random()-0.5).slice(0,3);
    [...picks, itm].sort(()=>Math.random()-0.5).forEach(o=>{
        let b=document.createElement('button'); b.className="btn-choice"; b.innerText=o.a;
        b.onclick=()=>{
            if(ss.ans) return; ss.ans=true;
            if(o.q===itm.q){ b.style.backgroundColor="#e3f2fd"; b.style.borderColor="#2196f3"; qQ.shift(); }
            else { b.style.backgroundColor="#ffebee"; b.style.borderColor="#ff5252"; qQ.push(qQ.shift()); }
            setTimeout(renderQ, 1200);
        }; area.appendChild(b);
    });
}
function fin() { if(curCh>=0 && !done.includes(curCh)) { done.push(curCh); localStorage.setItem('capoo_v9', JSON.stringify(done)); } document.getElementById('quiz-screen').classList.add('hidden'); document.getElementById('finish-screen').classList.remove('hidden'); }
function goHome() { document.getElementById('finish-screen').classList.add('hidden'); document.getElementById('home-screen').classList.remove('hidden'); renderHome(); }
function startFinalExam() { curCh=-1; qQ=courses.flatMap(c=>c.data).sort(()=>Math.random()-0.5).slice(0,25); ss.tot=25; document.getElementById('home-screen').classList.add('hidden'); document.getElementById('quiz-screen').classList.remove('hidden'); renderQ(); }
init();
</script>
</body>
</html>
